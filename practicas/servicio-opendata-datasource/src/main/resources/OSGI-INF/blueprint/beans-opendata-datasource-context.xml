<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	
	<bean id="dataSourceopendata"
		class="org.postgresql.ds.common.BaseDataSource">
		<property name="URL" value="${sirus.url}" />
		<property name="user" value="${sirus.username}" />
		<property name="password" value="${sirus.password}" />
	</bean>

	<bean id="opendataPoolDataSource"
		class="com.mchange.v2.c3p0.DataSources"
		factory-method="pooledDataSource">
		<argument ref="dataSourceopendata" />
		<argument>
			<map>
				<entry key="minPoolSize"
					value="0" />
				<entry key="maxPoolSize"
					value="16" />
				<entry key="initialPoolSize"
					value="0" />
				<entry key="preferredTestQuery"
					value="SELECT sysdate FROM dual" />
				<entry key="idleConnectionTestPeriod"
					value="900" />
				<entry key="maxConnectionAge"
					value="7200" />
			</map>
		</argument>
	</bean>

	<service id="opendataDataSourceService"
		ref="opendataPoolDataSource" interface="javax.sql.DataSource">
		<service-properties>
			<entry key="osgi.jndi.service.name" value="jdbc/opendata" />
		</service-properties>
	</service>
</blueprint>